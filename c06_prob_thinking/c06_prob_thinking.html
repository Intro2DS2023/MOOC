<!DOCTYPE html>
<html lang="en"><head>
<script src="../libs/clipboard/clipboard.min.js"></script>
<script src="../libs/quarto-html/tabby.min.js"></script>
<script src="../libs/quarto-html/popper.min.js"></script>
<script src="../libs/quarto-html/tippy.umd.min.js"></script>
<link href="../libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.433">

  <title>Probabilistic Thinking</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="../libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="../slides_quarto.css">
  <link href="../libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  
    <link rel="icon" href="../Intro2DS_logo.jpg" type="image/jpg"> 
    <link rel="shortcut icon" href="../Intro2DS_logo.jpg" type="image/jpg">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet" type="text/css">
  </head>

<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="section" class="slide level2 logo-slide">
    <h2></h2>
    </section>
<section id="introduction-to-data-science" class="slide level2 title-slide center">
<h2>Introduction to Data Science</h2>
<h3 id="probabilistic-thinking---class-6">Probabilistic Thinking - Class 6</h3>
<h3 id="giora-simchoni">Giora Simchoni</h3>
<h4 id="gsimchonigmail.com-and-add-intro2ds-in-subject"><code>gsimchoni@gmail.com</code> and add <code>#intro2ds</code> in subject</h4>
<h3 id="stat.-and-or-department-tau">Stat. and OR Department, TAU</h3>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>יש הרבה דרכים שהסתברות וסטטיסטיקה יכולות להטעות אותנו. ושום קורס שעוסק שבהן, לא שלם בלי לתת לפחות אזהרה, לגבי התופעות האלה. ביחידה זו נתמקד בשלוש דרכים שנתונים יכולים להטעות אם לא מסתכלים עליהם בצורה מקיפה ונכונה. אנחנו קוראים לזה: חשיבה הסתברותית.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="conditional-probability" class="slide level2 title-slide center">
<h2>Conditional Probability</h2>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>הסתברות בכלל היא מושג לא קל לתפיסה. הרי במציאות דברים מתרחשים או לא מתרחשים, אז מה המשמעות של המשפט מחר ירד גשם בסיכוי 80 אחוז. ואם אנשים לא מצטיינים בפירוש אמירות הסתברותיות, כשזה נוגע להסתברות מותנית התפיסה שלנו עלולה להטעות אותנו אפילו יותר.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="reminder-discrete-empirical-distributions">Reminder: Discrete Empirical Distributions</h3>
<div>
<ul>
<li class="fragment"><p>Marginal distribution: <span class="math inline">\(P(X = x_k)\)</span>, <span class="math inline">\(P(Y = y_l)\)</span></p></li>
<li class="fragment"><p>Joint distribution: <span class="math inline">\(P(X = x_k, Y = y_l)\)</span></p></li>
<li class="fragment"><p>Conditional distribution: <span class="math inline">\(P(Y = y_l | X = x_k)\)</span>, <span class="math inline">\(P(X = x_k | Y = y_l)\)</span></p></li>
<li class="fragment"><p>Most interesting: conditional distribution</p></li>
</ul>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>ניזכר בשלוש ההתפלגויות האמפיריות שלמדנו עליהן: ההתפלגות השולית, המרג’ינל, של X ושל Y. ההתפלגות המשותפת, הג’וינט, שהיא בעצם הסתברות החיתוך. וההסתברות המותנית, הקונדישיונל - אם ידוע לי שX קיבל ערך מסוים, מה כעת ההסתברות שY יקבל ערך אחר, האם היא שונה.</p>
<p>כאמור הכי מעניינת אותנו היא ההסתברות המותנית.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="reminder-the-contingency-table">Reminder: The Contingency Table</h3>
<table style="width:96%;">
<colgroup>
<col style="width: 14%">
<col style="width: 21%">
<col style="width: 21%">
<col style="width: 21%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th><span class="math inline">\(Y/X\)</span></th>
<th><span class="math inline">\(x_1\)</span></th>
<th><span class="math inline">\(x_2\)</span></th>
<th><span class="math inline">\(x_3\)</span></th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(y_1\)</span></td>
<td><span class="math inline">\(P(x_1, y_1)\)</span></td>
<td><span class="math inline">\(P(x_2, y_1)\)</span></td>
<td><span class="math inline">\(P(x_3, y_1)\)</span></td>
<td><span class="math inline">\(P(Y = y_1)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(y_2\)</span></td>
<td><span class="math inline">\(P(x_1, y_2)\)</span></td>
<td><span class="math inline">\(P(x_2, y_2)\)</span></td>
<td><span class="math inline">\(P(x_3, y_2)\)</span></td>
<td><span class="math inline">\(P(Y = y_2)\)</span></td>
</tr>
<tr class="odd">
<td>Total</td>
<td><span class="math inline">\(P(X = x_1)\)</span></td>
<td><span class="math inline">\(P(X = x_2)\)</span></td>
<td><span class="math inline">\(P(X = x_3)\)</span></td>
<td><span class="math inline">\(\large{1}\)</span></td>
</tr>
</tbody>
</table>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>ניזכר גם בטבלת השכיחות של שני משתנים בדידים X ו-Y. אפשר לחלץ כל הסתברות מטבלה זו. השוליות של X ושל Y נמצאות אכן בשוליים, והן הסכום של השורה או של העמודה.</p>
<p>ההתפלגות המשותפת נמצאת בתוך התאים, כל תא מתאר את הסתברות החיתוך של מאורע העמודה ומאורע השורה.</p>
<p>וההתפלגות המותנית לפי חוק בייס היא ההסתברות המשותפת בכל שורה, מחולקת בהסתברות השורה. או ההסתברות המשותפת בכל עמודה, מחולקת בהסתברות העמודה.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="reminder-important-laws">Reminder: Important Laws</h3>
<div>
<p>Given two random variables <span class="math inline">\(X,Y,\)</span> we have:</p>
<ul>
<li class="fragment"><p>Bayes’ Law: <span class="math display">\[ Pr (Y=y|X=x) = \frac{Pr(Y=y,X=x)}{Pr(X=x)} = \frac{Pr(X=x|Y=y)Pr(Y=y)}{Pr(X=x)}\]</span></p></li>
<li class="fragment"><p>Law of total probability: <span class="math display">\[ Pr(X=x) = \sum_y Pr(X=x,Y=y)=\sum_y Pr(X=x|Y=y) Pr(Y=y)\]</span></p></li>
<li class="fragment"><p>The two are often combined to give: <span class="math display">\[ Pr (Y=y_1|X=x) = \frac{Pr(X=x|Y=y_1)Pr(Y=y_1)}{\sum_y Pr(X=x|Y=y) Pr(Y=y)}\]</span></p></li>
<li class="fragment"><p>In this way, knowing only about <span class="math inline">\(Pr(X|Y)\)</span> and <span class="math inline">\(Pr(Y)\)</span> teaches us about <span class="math inline">\(Pr(Y|X)\)</span></p></li>
</ul>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>ואם כבר הזכרנו את חוק בייס נכתוב אותו שוב במפורש: ההסתברות המותנית Y שווה ל-y קטן, בהינתן שX קיבל ערך x ספציפי, היא הסתברות החיתוך חלקי ההסתברות השולית של X. וזה אומר ההסתברות המותנית ההפוכה של X בהינתן Y, כפול ההסתברות של Y, חלקי ההסתברות של X.</p>
<p>הרבה פעמים ההסתברות השולית של X שנמצאת במכנה מצריכה עוד חישוב באמצעות איסוף של הסתברויות מותנות באמצעות חוק ההסתברות השלמה, שהוא בעצם ממוצע משוקלל של הסתברויות מותנות.</p>
<p>אפשר לשלב בין שני החוקים, באמצעות הצבת נוסחת ההסתברות השלמה במכנה של חוק בייס.</p>
<p>וכך קיבלנו קשר בין ההסתברות של X בהינתן Y להסתברות של Y בהינתן X.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="example-corona-testing">Example: Corona testing</h3>
<p>Assume we have a Corona test described as <strong>super accurate</strong> meaning:</p>
<ul>
<li>99% of people who are carriers test positive</li>
<li>99% of people who are healthy test negative</li>
</ul>
<div class="fragment">
<ul>
<li>Question: given I get randomly tested and get a positive test, what is the probability that I am actually a carrier?</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>What if I add in this contingency table?</li>
</ul>
<table style="width:82%;">
<colgroup>
<col style="width: 23%">
<col style="width: 25%">
<col style="width: 19%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>predict healthy</th>
<th>predict sick</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>really healthy</td>
<td>99000</td>
<td>1000</td>
<td>100000</td>
</tr>
<tr class="even">
<td>really sick</td>
<td>1</td>
<td>99</td>
<td>100</td>
</tr>
<tr class="odd">
<td>Total</td>
<td>99001</td>
<td>1099</td>
<td>100100</td>
</tr>
</tbody>
</table>
</div>
<div class="fragment">
<ul>
<li>Answer: Assuming the disease is rare (say 1/1000 = 0.001), that probability is very small even for an <em>accurate</em> test!</li>
</ul>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>אז בואו ניתן דוגמא לכמה מתעתעת הסתברות מותנית יכולה להיות.</p>
<p>נניח שיש לנו בדיקה לנגיף הקורונה. ונתון לנו שהבדיקה מדויקת מאוד. כמה מדויקת? 99 אחוז מהנשאים של הנגיף יקבלו תשובה חיובית, ו-99 אחוז מהאנשים הבריאים יקבלו תשובה שלילית!</p>
<p>אבל נשאלת השאלה: נניח שקיבלתי תשובה חיובית. מה הסיכוי שאני באמת נשא של הנגיף? רוב האנשים יגידו מיד “סיכוי גבוה מאוד”. הבדיקה הרי כל כך מדויקת. יכול להיות שהם צודקים. אבל אם נפרמל את הנתונים שקיבלנו נראה שאי אפשר לדעת, ולמעשה יכול להיות שהסיכוי שאני נשא של הנגיף אם קיבלתי תשובה חיובית - הוא נמוך מאוד.</p>
<p>למשל, מה אם אוסיף את טבלת השכיחות הבאה, בלי הסתברויות, עם כמויות מוחלטות:</p>
<p>כעת אנחנו רואים שהנגיף נדיר למדי. הסיכוי להיות נשא הוא 1 לאלף! הנתונים עצמם לא משקרים: חשבו ותראו שאכן מתוך 100 אלף אנשים בריאים 99 אחוז יקבלו תשובה שלילית, ו-99 אחוז מהאנשים החולים יקבלו תשובה חיובית. אבל מה ההסתברות המבוקשת? מתוך 1099 אנשים שיקבלו תשובה חיובית רק 99 חולים! כלומר פחות מעשרה אחוזים!</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="formulation-in-terms-of-conditional-probabilities">Formulation in terms of conditional probabilities</h3>
<div>
<ul>
<li class="fragment"><p>Define two Bernoulli variables:</p>
<ul>
<li class="fragment"><span class="math inline">\(Y \in \{0,1\}\)</span> — carrier or not ; <span class="math inline">\(X \in \{0,1\}\)</span> — positive test or not</li>
</ul></li>
<li class="fragment"><p>Given values: <span class="math display">\[Pr(X=1|Y=1) = Pr(X=0|Y=0) = 0.99\;,\;\; Pr(Y=1) = 0.001\]</span></p></li>
<li class="fragment"><p>We are interested in <span class="math inline">\(Pr(Y=1|X=1)\)</span>, using our formulas above we get: <span class="math display">\[ Pr(Y=1|X=1) = \frac{Pr(X=1|Y=1)Pr(Y=1)}{Pr(X=1)} = \frac{0.99 \cdot 0.001}{0.99 \cdot 0.001 + 0.01\cdot0.999} = 0.0902.\]</span></p></li>
<li class="fragment"><p>Conclusion: If you get a positive result in this accurate test, you still have <span class="math inline">\(&lt;10\%\)</span> chance of being an actual carrier</p></li>
</ul>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>אז בואו נראה את זה בצורה קצת יותר פורמלית.</p>
<p>נגדיר שני משתני ברנולי: Y יהיה נשא נגיף או לא, 1 או אפס. X יהיה בדיקה חיובית או לא, 1 או אפס.</p>
<p>הנתון של 99 אחוז תשובה חיובית אם אתה חולה, ו-99 אחוז בדיקה שלילית אם אתה לא, נרשום כך: ההסתברות שX הבדיקה הוא 1 בהינתן Y 1 הוא 0.99, וההסתברות המותנית שX שווה 0 בהינתן Y שווה 0 היא 0.99. כמו-כן הנתון שהמחלה נדירה כל כך מיתרגם לסיכוי שY שווה 1, הוא 0.001 או 1 לאלף.</p>
<p>ההסתברות המבוקשת, היא שY, מצב הנבדק יהיה שווה 1 בהינתן שהבדיקה X חיובית, היא 1. לפי חוק בייס במונה יש לנו את ההסתברות ההפוכה שX שווה ל1 בהינתן Y שווה 1, היא 0.99, כפול המשקולת המאוד קטנה שY שווה 1, 1 לאלף. במכנה אנחנו רוצים את ההסתברות הכללית לקבל תשובה חיובית. לפי נוסחת ההסתברות השלמה זה שווה לסיכוי להיות חולה כפול הסיכוי של חולה לקבל תשובה חיובית, ועוד הסיכוי להיות בריא כפול הסיכוי של בריא לקבל תשובה חיובית.</p>
<p>התוצאה המפתיעה היא שהסיכוי להיות נשא של הנגיף או חולה גם בבדיקה מאוד מדויקת אם קיבלת תשובה חיובית, הוא פחות מעשרה אחוז. והסיבה לזה נעוצה בסיכוי האפריורי להיות בכלל חולה, שאם לא מתחשבים בו, עלולים להגיע למסקנות מוטעות מאוד.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="simpsons-paradox" class="slide level2 title-slide center">
<h2>Simpson’s Paradox</h2>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>תופעה הסתברותית נוספת שגם כן קשורה בהסתברות מותנית, יכולה להיות כל כך לא אינטואיטיבית, שיש שמכנים אותה פרדוקס - הפרדוקס של סימפסון.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="uc-berkeley-gender-bias-study">UC Berkeley Gender Bias Study</h3>
<ul>
<li>A well known research studying relation between:
<ul>
<li>Gender</li>
<li>Admission to Berkeley</li>
<li>Department</li>
</ul></li>
</ul>
<p>When checking relation between Gender and Admission:</p>
<div class="fragment">
<table style="width:82%;">
<colgroup>
<col style="width: 23%">
<col style="width: 25%">
<col style="width: 19%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Men</th>
<th>Women</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Not Admitted</td>
<td>150</td>
<td>220</td>
<td>370</td>
</tr>
<tr class="even">
<td>Admitted</td>
<td>220</td>
<td>150</td>
<td>370</td>
</tr>
<tr class="odd">
<td>Total</td>
<td>370</td>
<td>370</td>
<td>540</td>
</tr>
</tbody>
</table>
</div>
<div class="fragment">
<p>Men applying are more likely to be admitted?</p>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>ניתן פה דוגמא אמיתית אבל עם נתונים מומצאים, על נתוני הקבלה של גברים ונשים לאוניברסיטת ברקלי, ב-1973.</p>
<p>מחקר בדק את הקשר בין מין המועמדים, סיכויי הקבלה שלהם והמחלקה אליה ניסו להתקבל. כששמים את התוצאות בטבלת 2 על 2 ובודקים את הקשר בין מין המועמד לקבלה, מתקבלת תמונה מאוד מוזרה:</p>
<p>בקרב 370 גברים שניסו להתקבל 220 התקבלו כלומר כ60 אחוז. בקרב נשים שניסו להתקבל רק 150 התקבלו, כומר כ40 אחוז.</p>
<p>אז האם יש הטיה באוניברסיטת ברקלי לקבל יותר גברים?</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="uc-berkeley-gender-bias-study-1">UC Berkeley Gender Bias Study</h3>
<ul>
<li>When conditioning on Department, the conclusion reverses:</li>
</ul>
<div class="fragment">
<table style="width:96%;">
<colgroup>
<col style="width: 21%">
<col style="width: 21%">
<col style="width: 22%">
<col style="width: 17%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>Department</th>
<th></th>
<th>Men</th>
<th>Women</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>Not Admitted</td>
<td>50</td>
<td>200</td>
<td>250</td>
</tr>
<tr class="even">
<td></td>
<td>Admitted</td>
<td>20</td>
<td>100</td>
<td>120</td>
</tr>
<tr class="odd">
<td>B</td>
<td>Not Admitted</td>
<td>100</td>
<td>20</td>
<td>120</td>
</tr>
<tr class="even">
<td></td>
<td>Admitted</td>
<td>200</td>
<td>50</td>
<td>250</td>
</tr>
<tr class="odd">
<td>Total</td>
<td>Total</td>
<td>370</td>
<td>370</td>
<td>540</td>
</tr>
</tbody>
</table>
</div>
<div class="fragment">
<ul>
<li>Conclusion: Women applied more for department A, with lower admission rates!</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Simpson’s Paradox: a trend appears marginally, and disappears or completely reverses when checking by group</li>
</ul>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>לא בהכרח! כשמתנים את הנתונים על המחלקה, כלומר רואים את הטבלת 2 על 2 שלנו בנפרד לכל מחלקה, לא רק שגברים לא מופלים לטובה בברקלי, הם אולי אפילו מופלים לרעה!</p>
<p>בנתונים המומצאים שלנו יש לנו שתי מחלקות A ו-B. בקרב המועמדים של מחלקה A 20 מתוך 70 גברים התקבלו, כלומר כ28 אחוזים, ואילו 100 מתוך 300 נשים התקבלו, כלומר כ33 אחוזים.</p>
<p>ואילו במחלקה B 200 מ-300 גברים התקבלו, כ66 אחוזים, ו50 מתוך 70 נשים התקבלו כלומר יותר מ70 אחוזים.</p>
<p>אז איך זה קורה? התשובה נעוצה בהסתברות מותנית שוב. נשים לב שהסיכוי להתקבל במחלקה A מלכתחילה היא נמוכה מאוד, רק 120 מתוך 370, קצת פחות מ33 אחוז. ואילו הסיכוי להתקבל למחלקה B מלכתחילה הוא גבוה יחסית, 250 מתוך 370, כ67 אחוז. ולאן רוב הבנות מנסות להתקבל? למחלקה A, שמאוד קשה להתקבל אליה!</p>
<p>זהו פרדוקס סימפסון: אנחנו רואים איזושהי תופעה, טרנד כשאנחנו מסתכלים על השורה התחתונה של הנתונים, באופן שולי, אבל כשמסתכלים לעומק, בחלוקה לקבוצות, התופעה נעלמת ואולי אפילו מתהפכת.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="formulizing-the-uc-berkeley-example">Formulizing the UC Berkeley Example</h3>
<ul>
<li><span class="math inline">\(X\)</span> – Gender (<span class="math inline">\(M/F\)</span>)</li>
<li><span class="math inline">\(Y\)</span> – Admission to Berkeley (<span class="math inline">\(yes/no\)</span>)</li>
<li><span class="math inline">\(Z\)</span> – Department (<span class="math inline">\(A/B\)</span>)</li>
</ul>
<div>
<ul>
<li class="fragment"><span class="math inline">\(Pr(Y = yes | X = M) &gt; Pr(Y = yes | X = F)\)</span>, but:</li>
<li class="fragment"><span class="math inline">\(Pr(Y = yes | X = M, Z = A) &lt; Pr(Y = yes | X = F, Z = A)\)</span></li>
<li class="fragment"><span class="math inline">\(Pr(Y = yes | X = M, Z = B) &lt; Pr(Y = yes | X = F, Z = B)\)</span></li>
</ul>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>כמנהגנו ננסה לפרמל את הבעיה ולהשיג יותר תובנות: מין המועמד יהיה X, הקבלה לברקלי תהיה Y והמחלקה תהיה Z.</p>
<p>מה שאנחנו רואים זה שכשאנחנו מתנים את Y הקבלה על X המין, הסיכוי להתקבל גבוה יותר אצל גברים. אבל: כשמתנים גם על המשתנה Z כיוון האי-שוויון מתהפך: בקרב המועמדים במחלקה A וגם בקרב המועמדים במחלקה B, הסיכוי להתקבל בקרב נשים גבוה יותר.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="how-can-that-be">How can that be?</h3>
<p>The probabilities which are not conditioned on Department are still <strong>weighted averages</strong> (Bayes Law):</p>
<p><span class="math display">\[
\begin{aligned}
Pr(Y = yes | X = F) &amp;= Pr(Y = yes | X = F, Z = A) \cdot \bf{Pr(Z = A | X = F)} \\
    &amp;+ Pr(Y = yes | X = F, Z = B) \cdot \bf{Pr(Z = B | X = F)}
\end{aligned}
\]</span></p>
<div class="fragment">
<p>The paradox occurs due to these weights! (women applying to more competitive departments)</p>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>איך זה יכול להיות? הטריק הוא להבין לפי חוק בייס ונוסחת ההסתברות השלמה, שההסתברות שמותנית רק על משתנה אחד, רק על משתנה X המין, היא עדיין ממוצע משוקלל של הסתברויות, כאשר המשקולות הן ההסתברויות המותנות של Z לפי X, או מה הסיכוי מלכתחילה שמועמדות נשים ינסו להתקבל למחלקה A ולמחלקה B.</p>
<p>נשים מנסות להתקבל יותר למחלקה A שקשה להתקבל אליה, מה שמגדיל הרבה יותר את המשקולת של ההסתברות הקטנה יותר.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="simpsons-paradox-the-effect-of-additional-conditioning">Simpson’s paradox: the effect of additional conditioning</h3>
<div>
<ul>
<li class="fragment"><p>In general assume now we have three random variables <span class="math inline">\(X, Y, Z\)</span></p></li>
<li class="fragment"><p>We can consider two conditional distributions: <span class="math inline">\(Pr(Y|X)\)</span> and <span class="math inline">\(Pr(Y|X,Z)\)</span></p></li>
<li class="fragment"><p>The paradox, which is not really a paradox, says that we can reach “conflicting” conclusions, for example:</p>
<ul>
<li class="fragment"><span class="math inline">\(Pr(Y = 1 | X = x_1) &gt; Pr(Y = 1 | X = x_2)\)</span></li>
<li class="fragment">but: <span class="math inline">\(Pr(Y = 1 | X = x_1, Z = z) &lt; Pr(Y = 1 | X = x_2, Z = z),\;\; \forall z\)</span></li>
</ul></li>
<li class="fragment"><p>So in this situation, is <span class="math inline">\(x_1\)</span> or <span class="math inline">\(x_2\)</span> a better support for <span class="math inline">\(Y = 1\)</span>?</p></li>
<li class="fragment"><p>Back to basic formulas, the key is the weighting: <span class="math display">\[ Pr(Y = y | X = x) = \sum_z Pr(Y = y | X = x, Z = z) {\bf Pr(Z = z | X = x)}\]</span></p></li>
</ul>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>באופן כללי אנחנו מסתכלים על קשר בין שלושה משתנים X, Y ו-Z.</p>
<p>אפשר לבחור להתנות משתנה Y בX בלבד או בX וגם בZ.</p>
<p>הפרדוקס הוא שהסתברות של Y להיות 1 בהינתן X1 גדולה יותר מההסתברות של Y בהינתן X2, אבל כשמתנים גם על Z, וזה לכל Z, ההסתברות של Y בהינתן X1 קטנה יותר מההסתברות של Y בהינתן X2.</p>
<p>ואז נשאלת השאלה מה יביא להסתברות גבוהה יותר שY יהיה 1? X1 או X2? התשובה היא שכמובן שX2, בכל רמה של Z הוא מביא להסתברות גבוהה יותר ש-Y יהיה שווה 1.</p>
<p>המפתח הוא להבין שגם הסתברות מותנית על משתנה אחד אפשר לראות כהסתברות שולית שהיא ממוצע משוקלל של הסתברויות מותנות על משתנה נוסף. ואם יש לנו נתונים לגבי משתנה נוסף - אסור לנו להתעלם ממנו! אחרת אנחנו יכולים להגיע למסקנות שטחיות ומוטעות.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="another-example-corona-mortality">Another example: Corona mortality</h3>
<ul>
<li><p>We have two countries (call them <em>Italy</em> and <em>Germany</em>)</p></li>
<li><p>In Italy the mortality rate among Corona patients is higher than in Germany</p></li>
<li><p>But in Germany the mortality rate is higher than in Italy both among young patients and among old patients</p></li>
<li><p>How can that be?</p></li>
</ul>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>דוגמא נוספת מהזמן האחרון: תמותה מקורונה.</p>
<p>יש לנו שתי ארצות, איטליה וגרמניה, ודווח בתקשורת שאחוז התמותה מקורונה באיטליה גבוה יותר מאחוז התמותה בגרמניה. יכול להיות שזה נכון. אבל מדען נתונים טוב, יבקש לראות עוד נתונים, לדוגמא גיל.</p>
<p>מסתבר, שאם מסתכלים על אחוז התמותה לפי קבוצות גיל, גם בקרב צעירים וגם בקרב מבוגרים, התופעה מתהפכת, אחוז התמותה בגרמניה גדול יותר!</p>
<p>נסו לחשוב בעזרת מה שלמדנו: איך זה יכול להיות?</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="another-example-corona-mortality-1">Another example: Corona mortality</h3>
<div>
<ul>
<li class="fragment"><p>Let <span class="math inline">\(Y\)</span> = Dead/Alive, <span class="math inline">\(X\)</span> = Country, <span class="math inline">\(Z\)</span> = Young/Old and we are considering only Corona patients:</p></li>
<li class="fragment"><p><span class="math inline">\(Pr(Y=D|X=I) &gt; Pr(Y=D|X=G)\)</span>, but:</p></li>
<li class="fragment"><p><span class="math inline">\(Pr(Y=D|X=I, Z=Yo) &lt; Pr(Y=D|X=G, Z=Yo)\)</span></p></li>
<li class="fragment"><p><span class="math inline">\(Pr(Y = D | X=I, Z=O) &lt; Pr(Y=D|X=G, Z=O)\)</span></p></li>
</ul>
</div>
<div class="fragment">
<p>Solution: Germany has a lot of young patients, Italy a lot of old: <span class="math display">\[ Pr(Z=Yo | X=G) \gg Pr(Z=Yo | X=I).\]</span></p>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>נסמן בY את מצב החולה, מת או חי. בX את הארץ, גרמניה או איטליה. ובZ את הגיל, צעיר או מבוגר.</p>
<p>שוב נגדיר מה אנחנו רואים: כשאנחנו מתנים רק על X, הארץ, אחוז המתים באיטליה גבוה יותר. אבל כשאנחנו מתנים גם על גיל החולה, מתקבלת התופעה ההפוכה: הסיכוי שY החולה ימות באיטליה נמוך יותר, גם בקרב צעירים וגם בקרב מבוגרים.</p>
<p>ומה עומד מאחורי זה? בגרמניה יש הרבה יותר תושבים צעירים! הסיכוי של Z להיות צעיר בהינתן שX הארץ הוא גרמניה, גבוה הרבה יותר מאשר הסיכוי של Z להיות צעיר כשX הארץ הוא איטליה.</p>
<p>והתמותה בקרב צעירים מקורונה היתה נמוכה משמעותית, כלומר בגרמניה יש יותר תושבים עם נטייה למות פחות מקורונה מה שמשפיע על השורה התחתונה ומעוות את התמונה, אם לא מסתכלים גם על משתנה הגיל.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="simpsons-paradox-beyond-binary-variables">Simpson’s paradox beyond binary variables</h3>
<p>Continuous distributions with clusters (example in recitation)</p>

<img data-src="images/simpsons-paradox.gif" class="r-stretch"><p><a href="https://simplystatistics.org/posts/2017-08-08-code-for-my-educational-gifs/">source</a></p>
<div class="fragment">
<p>When <span class="math inline">\(Y\)</span> is numeric: we may be interested in conditional expectation, with “paradox”:</p>
<ul>
<li><span class="math inline">\(\mathbb E(Y|X=x_1) &gt; \mathbb E(Y|X=x_2)\)</span>, but:</li>
<li><span class="math inline">\(\mathbb E(Y|X=x_1, Z=z) &lt; \mathbb E(Y|X=x_2, Z=z),\;\; \forall z\)</span></li>
</ul>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>בתרגול תראו שפרדוקס סימפסון מתקיים גם מעבר לשלישיות של משתנים בדידים. כאן אנחנו רואים קשר בין שני משתנים רציפים X ו-Y. כשאנחנו מסתכלים עליהם בצורה חסרה, בצורה שולית, יש קשר יורד בין המשתנים מאוד ברור. אבל אם אנחנו מסתכלים על הקשר בכל תת-קבוצה של משתנה בדיד נוסף Z, התופעה הפוכה, ואנחנו רואים שלמעשה הקשר בין X ל-Y הוא קשר חיובי.</p>
<p>דרך נוחה לחשוב על זה הוא באמצעות תוחלת מותנית, שתתרגלו בתרגול. כשאנחנו מסתכלים על התוחלת המותנית של Y בהינתן ערך נמוך X1, אנחנו רואים שהיא גבוהה יותר מאשר התוחלת אם נתון ערך גבוה יותר X2. אבל אם מתנים גם על משתנה נוסף Z, לכל ערך של Z, ההבדל בין התוחלות המותנות מתהפך. Y עולה כש-X עולה, לכל רמה של Z.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="anscombes-quartet" class="slide level2 title-slide center">
<h2>Anscombe’s Quartet</h2>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>התופעה השלישית והאחרונה שנדבר עליה, לאו דוקא קשורה להסתברות מותנית. אבל היא בוודאי ובודאי קשורה להסתכלות שטחית על נתונים.</p>
<p>זוכרים שנתנו עצה תמיד תמיד להעיף מבט בנתונים, רצוי בתרשים, ולא להסתפק בתמציות שמסכמות אותם? בואו נראה מה יכול לקרות אם לא עושים את זה.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="anscombes-quartet-1">Anscombe’s Quartet</h3>
<div class="columns">
<div class="column" style="width:70%;">
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">13</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">14</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">12</span>, <span class="dv">7</span>, <span class="dv">5</span>]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>y1 <span class="op">=</span> [<span class="fl">8.04</span>, <span class="fl">6.95</span>, <span class="fl">7.58</span>, <span class="fl">8.81</span>, <span class="fl">8.33</span>, <span class="fl">9.96</span>, <span class="fl">7.24</span>, <span class="fl">4.26</span>, <span class="fl">10.84</span>, <span class="fl">4.82</span>, <span class="fl">5.68</span>]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>y2 <span class="op">=</span> [<span class="fl">9.14</span>, <span class="fl">8.14</span>, <span class="fl">8.74</span>, <span class="fl">8.77</span>, <span class="fl">9.26</span>, <span class="fl">8.10</span>, <span class="fl">6.13</span>, <span class="fl">3.10</span>, <span class="fl">9.13</span>, <span class="fl">7.26</span>, <span class="fl">4.74</span>]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>y3 <span class="op">=</span> [<span class="fl">7.46</span>, <span class="fl">6.77</span>, <span class="fl">12.74</span>, <span class="fl">7.11</span>, <span class="fl">7.81</span>, <span class="fl">8.84</span>, <span class="fl">6.08</span>, <span class="fl">5.39</span>, <span class="fl">8.15</span>, <span class="fl">6.42</span>, <span class="fl">5.73</span>]</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>x4 <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">19</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>y4 <span class="op">=</span> [<span class="fl">6.58</span>, <span class="fl">5.76</span>, <span class="fl">7.71</span>, <span class="fl">8.84</span>, <span class="fl">8.47</span>, <span class="fl">7.04</span>, <span class="fl">5.25</span>, <span class="fl">12.50</span>, <span class="fl">5.56</span>, <span class="fl">7.91</span>, <span class="fl">6.89</span>]</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>datasets <span class="op">=</span> {</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'I'</span>: (x, y1),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'II'</span>: (x, y2),</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'III'</span>: (x, y3),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'IV'</span>: (x4, y4)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, sharex<span class="op">=</span><span class="va">True</span>, sharey<span class="op">=</span><span class="va">True</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">6</span>),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                        gridspec_kw<span class="op">=</span>{<span class="st">'wspace'</span>: <span class="fl">0.08</span>, <span class="st">'hspace'</span>: <span class="fl">0.08</span>})</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">0</span>].<span class="bu">set</span>(xlim<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">20</span>), ylim<span class="op">=</span>(<span class="dv">2</span>, <span class="dv">14</span>))</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">0</span>].<span class="bu">set</span>(xticks<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">20</span>), yticks<span class="op">=</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">12</span>))</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax, (label, (x, y)) <span class="kw">in</span> <span class="bu">zip</span>(axs.flat, datasets.items()):</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    ax.text(<span class="fl">0.1</span>, <span class="fl">0.9</span>, label, fontsize<span class="op">=</span><span class="dv">20</span>, transform<span class="op">=</span>ax.transAxes, va<span class="op">=</span><span class="st">'top'</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(direction<span class="op">=</span><span class="st">'in'</span>, top<span class="op">=</span><span class="va">True</span>, right<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    ax.plot(x, y, <span class="st">'o'</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># linear regression</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    p1, p0 <span class="op">=</span> np.polyfit(x, y, deg<span class="op">=</span><span class="dv">1</span>)  <span class="co"># slope, intercept</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    ax.axline(xy1<span class="op">=</span>(<span class="dv">0</span>, p0), slope<span class="op">=</span>p1, color<span class="op">=</span><span class="st">'r'</span>, lw<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add text box for the statistics</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> (<span class="ss">f'X Mean = </span><span class="sc">{</span>np<span class="sc">.</span>mean(x)<span class="sc">:.2f}</span><span class="ch">\n</span><span class="ss">'</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>             <span class="ss">f'Y Mean = </span><span class="sc">{</span>np<span class="sc">.</span>mean(y)<span class="sc">:.2f}</span><span class="ch">\n</span><span class="ss">'</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>             <span class="ss">f'X SD = </span><span class="sc">{</span>np<span class="sc">.</span>std(x)<span class="sc">:.2f}</span><span class="ch">\n</span><span class="ss">'</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>             <span class="ss">f'Y SD = </span><span class="sc">{</span>np<span class="sc">.</span>std(y)<span class="sc">:.2f}</span><span class="ch">\n</span><span class="ss">'</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>             <span class="ss">f'Corr = </span><span class="sc">{</span>np<span class="sc">.</span>corrcoef(x, y)[<span class="dv">0</span>][<span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    bbox <span class="op">=</span> <span class="bu">dict</span>(boxstyle<span class="op">=</span><span class="st">'round'</span>, fc<span class="op">=</span><span class="st">'blanchedalmond'</span>, ec<span class="op">=</span><span class="st">'orange'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    ax.text(<span class="fl">0.95</span>, <span class="fl">0.07</span>, stats, fontsize<span class="op">=</span><span class="dv">9</span>, bbox<span class="op">=</span>bbox,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>            transform<span class="op">=</span>ax.transAxes, horizontalalignment<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img data-src="c06_prob_thinking_files/figure-revealjs/cell-2-output-1.png" width="496" height="480"></p>
</div>
</div>
</div><div class="column" style="width:30%;">
<div class="fragment">
<ul>
<li>Beware of looking at just summary statistics!</li>
<li>Be careful of outliers!</li>
<li>Plot first!</li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>סטטיסטיקאי בריטי בשם אנסקומב פרסם רביעיית זוגות נתונים של X ו-Y, במטרה להמחיש מה קורה כשלא מסתכלים על הנתונים.</p>
<p>למרות שכל זוג של X ושל Y שונים לחלוטין, אם מסתכלים רק על מדדים כמו: ממוצע, סטיית תקן, ומתאם, זה נראה שהם זהים לחלוטין.</p>
<p>אנסקומב רצה להדגים גם את הבעייתיות בהסתכלות שטחית על נתונים וגם את הסכנה בתצפיות חריגות, אאוטליירז, כמו שאפשר לראות בזוגות השלישי והרביעי. רוב הנקודות נמצאות בטרנד מסוים, ורק בגלל נקודה אחת שכאילו אינה במקומה מתקבל רושם אחר לגמרי אם מסתכלים רק על המדדים השוליים כמו מתאם למשל. בתרשים השלישי המתאם בין X לY בנכוי התצפית החריגה גדול הרבה יותר מ-0.82, ובתרשים הרביעי הוא קטן הרבה יותר.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="datasaurus-dozen">Datasaurus Dozen</h3>
<p>A modern Anscombe’s Quartet by Matejka and George (2017):</p>

<img data-src="images/DinoSequentialSmaller.gif" class="r-stretch"><aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>לפני כמה שנים עדכנו צמד סטטיסטיקאים את האנליזה של אנסקומב והוסיפו כמו זוגות של X ו-Y מרשימים משלהם. כפי שניתן לראות גם כאן, הממוצעים וסטיות התקן של X ושל Y כמעט זהים וכך גם המתאם ביניהם. אבל דפוס הנתונים שונה לחלוטין בכל אחד מזוגות הנתונים!</p>
<p>ואחד מהם הוא אפילו ציור של דינוזאור!</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="pitfalls-summary" class="slide level2 title-slide center">
<h2>Pitfalls Summary</h2>
<aside class="notes">
<div style="direction:rtl; font-size:16px">

</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="conclusions-about-probabilistic-thinking">Conclusions about probabilistic thinking</h3>
<ul>
<li><p>Conditional distributions are very important for interpretation and not very intuitive sometimes</p></li>
<li><p>It is critical to carefully consider which direction and level of conditioning is relevant to reasoning about data</p></li>
<li><p>It is important to be able to write the information, questions and answers explicitly as statements about conditional probabilities or expectations, and use the laws of probability correctly</p></li>
</ul>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>נסכם מה רצינו להגיד ביחידה הזאת:</p>
<p>התפלגויות מותנות הן חשובות מאוד בניתוח נתונים ויכולות להיות מעט לא אינטואיטיביות.</p>
<p>כשמנתחים נתונים, חשוב להציג את כל הנתונים, ולהתנות על כל המשתנים עד כמה שאפשר לפני שמגיעים למסקנות.</p>
<p>לבסוף, תראו כמה חשיבה בצורה פורמלית עזרה לנו. ברגע שאתם מסמנים משתנים באמצעות אותיות ומשתמשים בחוקי ההסתברות אתם יכולים לזקק מסקנות יפות בניתוח נתונים.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="dependence-and-causality">Dependence and causality</h3>
<ul>
<li><p>A well known but often misunderstood fact is that correlation/dependence is not the same as causality</p></li>
<li><p>Example: Assume we study <span class="math inline">\(X\)</span>=smoking and <span class="math inline">\(Y\)</span>=lung disease and find a strong correlation between them: people who smoke more have more lung disease</p></li>
<li><p>Assume for now the connection is real and replicable in multiple studies</p></li>
<li><p>Is it correct to conclude that smoking causes lung disease?</p></li>
</ul>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>נקנח באזהרה אחרונה על כך שהתלות שאנחנו מודדים עם הסתברות מותנית או מתאם, איננה מעידה בהכרח על סיבתיות.</p>
<p>לדוגמא, משתנה X יהיה עישון, ומשתנה Y יהיה לחלות בסרטן ריאות, ואנחנו רואים מתאם גבוה בין שניהם: אנשים שמעשנים יותר, חולים יותר בסרטן הריאות.</p>
<p>אפילו בהינתן שהקשר אמיתי, כל הקשרים שראינו היום היו אמיתיים – האם נכון לקפוץ להסיק שעישון גורם לסרטן הריאות רק על סמך הסיפור הזה שסיפרתי לכם?</p>
<p>עצרו וחשבו איזה עוד גורם יכול להשפיע על הנתונים האלה.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="causal-and-example-of-non-causal-relationships">Causal and (example of) non-causal relationships</h3>

<img data-src="images/Cause.png" class="r-stretch"><aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>יכול בהחלט להיות למשל, שאנחנו רואים השפעה של עישון על סרטן ריאות, אבל שזה קורה בגלל שלא הסתכלנו במשתנה מתערב אחר שמשפיע על שניהם כמו מעמד סוציו אקונומי. יכול מאוד להיות שאנשים ממעמד סוציואקונומי נמוך נוטים לעשן יותר, ולאנשים ממעמד סוציואקונומי נמוך יש נטייה לחלות יותר בסרטן הריאות.</p>
<p>כך ששוב אנחנו רואים את השורה התחתונה, השולית, ואם לא נחקור יותר לעומק אנחנו עלולים להגיע למסקנות מוטעות.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="how-and-when-can-we-infer-causality">How and when can we infer causality?</h3>
<ul>
<li><p>This is an area of active research, there are many theories and practical methods:</p>
<ul>
<li><p>Clinical trials that guarantee found relations are causal</p></li>
<li><p>Instrumental variable methods</p></li>
<li><p>Causal inference methods by Judea Pearl and others</p></li>
</ul></li>
<li><p>We will not discuss these in more detail in this course</p></li>
</ul>
<aside class="notes">
<div style="direction:rtl; font-size:16px">
<p>סיבתיות או קוזליטי היא תחום מחקר מאוד חם עכשיו - איך אנחנו מבצעים ניסויים שכן יכולים להגיע למסקנה, שגורם א אכן גורם לתופעה ב ולא בגלל קשר נסיבתי. מי שרוצה לקרוא עוד על התופעה מוזמן לקרוא למשל בספרו המצוין של יהודה פרל, causality. בקורס שלנו כאן אנחנו עוצרים.</p>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>

<img src="../Intro2DS_logo_white.jpg" class="slide-logo r-stretch"><div class="footer footer-default">
<p><a href="https://intro2ds2023.github.io/mooc/" target="_blank">Intro to Data Science</a></p>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../libs/revealjs/plugin/search/search.js"></script>
  <script src="../libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>