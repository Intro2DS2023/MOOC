=== 1. פורמטים של נתונים ======

איך משיגים נתונים? מה כדאי לעשות דבר ראשון כשמקבלים קובץ נתונים, ומה יכול להיות כל כך לא נקי בנתונים שצריך לנקות אותם? היום נלמד כמה עקרונות בסיס בנתונים, הם חומר הגלם של דאטא סיינס.

:::

נתחיל בללמוד על פורמטים נפוצים שבהם נתונים מגיעים.

:::

פורמט נפוץ מאוד הוא comma separated values, או CSV.

אם תפתחו CSV בתכנת עריכה הפשוטה ביותר הוא ייראה לכם כמו ג'ונגל של נתונים, אבל האמת שזה פורמט מצוין לדאטה בצורת טבלה. כאן יש לנו דאטה שבו לקוחות תיארו את החוויות שלהם עם תרופות שונות ודירגו את אותן תרופות.

אני קורא את הנתונים פנדאז, ה-ספרייה הטובה ביותר שיש לפייתון להציע כשזה נוגע לנתוני טבלה, כל עוד הם לא גדולים מדי, וגם על זה נדבר. אני משתמש בפקודה read_csv, ומבקש את השורות הראשונות של הדאטה עם המתודה head, והוא כבר נראה הרבה יותר ברור.

:::

פורמט נוסף שחשוב להכיר כי הוא גמיש הרבה יותר, וזה גם פורמט שבו מגיעים הרבה פעמים נתונים כתוצאה מקריאות לשרתים באינטרנט - הוא ג'ייסון. ג'ייסון מתאים למידע מקונן או nested, כמו מילון, שבו יש קבוצה של צמדים של key ו-value. במקרה שלפנינו יש נתון מתוך מפקד אוכלוסין על אדם מסוים. והמפתחות הם מה השם שלו, כתובת, גיל וכולי. נשים לב שהערכים יכולים להיות מילונים בעצמם כמו הכתובת כאן, או רשימה של ערכים.

בפייתון אפשר להשתמש במודול json ולפתוח את הקובץ עם הפקודה json.load. היופי בפייתון הוא שהדאטא נקרא ישר לתוך מילון dict של פייתון, שיש לו את כל הגמישות של מילון json.

:::

ניתן לקרוא נתונים גם מקובץ טקסט פשוט, זה בדרך כלל אכן מתאים לטקסט, לדוגמא לצורך ניתוחים של שפה או ייצור טקסט. במקרה הזה יש לנו קובץ טקסט פשוט של שיר, ואני משתמש בפקודה readlines לקרוא את השורות לתוך רשימה של מחרוזות. כל שורת טקסט היא מחרוזת.

:::

נתונים נמצאים גם במקומות פחות צפויים. אפשר לחלץ נתונים כמעט מכל אתר אינטרנט. ואתרי אינטרנט כתובים בשפת html. בתרגול תלמדו יותר על מבנה html, שאפשר לראות אותו כמעין עץ של תכונות שבו כל ענף מתפרש לתת-ענפים וכך הדפדפן יודע להציג לנו את האתר.

:::

כדי לקרוא את המידע באתר סטטי אפשר להשתמש בספריית beautifulsoup, כאן אני קורא קובץ html על-ידי העטיפה שלו בקלאס BeautifulSoup.

הפעולה הזאת בעצם קוראת את העץ שהוא דף הhtml, לתוך אוביקט שכאן נקרא soup, כמו שמקובל בחבילה הזאת. אם אבקש את המתודה prettify על האוביקט הזה נראה שאכן כל קובץ הhtml נמצא בו בצורה מסודרת.

למה שנרצה לקרוא אתר מהאינטרנט ומה הקשר לנתונים? על כך ביחידה הבאה.

=== 2. איסוף נתונים ===

איך מגיעים אלינו נתונים? החיים הם לא קורס, ונתונים לא נמצאים פשוט כמו כאן באתר הקורס בקובץ מסודר ומחכים שננתח אותם!

בעבר נתונים הגיעו כמעט תמיד כי מישהו אצר אותם בצורה ידנית. מישהו כתב אותם ביומן או ספר, שורה אחר שורה. היום בעידן הביג דאטא רוב הנתונים נאספים בצורה אוטומטית. בואו נראה כמה דוגמאות.

:::

גם היום, יש שפע דוגמאות של אוצרות נתונים ידנית. אם ההורים שלכם צירו על הקיר את הגובה שלכם מהרגע שנעמדתם על הרגליים - נראה את המידע הזה על הקיר. אחרת - לא יהיו לנו הנתונים.

:::

ברמה הלאומית נתונים תמיד הגיעו מממשלות שפשוט תיעדו את הקורה בתוך המדינה לצרכי ניתוח כלכלי. כאן אפשר לראות שיש לנו תיעוד מאמצע המאה ה19, על כמות צריכת האלכוהול השנתית של אזרח אמריקאי. נסו לחשוב על מה מעיד המידע החסר בשנת 1920 ועד אמצע שנות ה30 של המאה ה20. האם באותה תקופה הפסיקו האמריקאים לשתות אלכוהול?

:::

כיום כאמור אנחנו מעריכים שמרבית הנתונים פיסית בעולם נאגרים בצורה אוטומטית. כל פעם שאתם נכנסים לאתר אינטרנט אפילו אם זה רק להסתכל על מחירים של חולצות, אתם מייצרים דאטא. עצם פתיחת הדפדפן מייצרת שורה במאגר נתונים של גוגל: מי אתם, מה המין, הגיל והמיקום שלכם ומתי פתחתם את הדפדפן. 

אפילו גלילה באתרים מסוימים שיש להם את הקיבולת לאגור נתוני ענק, יכולה להיות שורה בבסיס נתונים: מתי גללתם, כמה גללתם, מה היתה הפעולה הבאה שלכם.

:::

וגם אתם יכולים לייצר דאטא מהאינטרנט, באמצעות פעולה שנקראת web scraping. זה יכול להיות דרך שירותים של אתרים שנקראים APIs, וזה יכול להיות דרך קוד בbeautiful soup, באמצעות פעולה אקטיבית שלכם מול דף אונליין.

:::

דוגמא לAPI שכזה הוא גוגל טרנדס. גוגל מאפשרת לכל גולש לקבל את דפוס החיפוש אחר מונח כלשהו לאורך תקופה, ואפילו להשוות למונחים אחרים. כאן חיפשתי את הטרנד של חיפוש אחר אוכל לחתולים מול אוכל לכלבים. יותר מזה, אתם יכולים בלחיצת כפתור להוריד את הנתונים כטבלה למחשב האישי בקובץ csv.

בתרגול תראו דוגמאות לAPIs נוספים ולספריות פייתון שעוטפות אותם.

:::

אם אין API, ואין לאתר מדיניות נוקשה נגד תוכנה שקוראת לו להוריד דאטא, אפשר להשתמש בכלים תכנותיים כדי להוריד דאטא.

נסתכל על עמוד הוויקיפדיה של תקליטי הביטלס למשל. נחמד להסתכל על הטבלה, אבל אין לה ערך ממשי עבורנו בלי שנוכל למיין אותה, לקבץ אותה, לסכום אותה וכולי.

הקוד שלפנינו מוריד את האתר של הערך בוויקיפדיה, ומהאתר נחלץ את הטבלה. אנחנו קוראים לאתר עם ספריית requests, ועוטפים את תוכן הקריאה עם הקלאס BeautifulSoup כפי שראינו, לתוך אוביקט שנקרא soup.

:::

כעת נאתחל מילון ריק בשם albums. נמצא את כל הטבלאות בדף, כלומר את כל התגיות html בשם table.

נעבור טבלה טבלה, נמצא את הכותרת שלה, ונשווה לכותרת שאנחנו מחפשים. אם מצאנו את הטבלה המבוקשת, נמצא את כל השורות שלה.

נעבור שורה שורה, ונרשום במילון שלנו את מה שאנחנו מחפשים: שם האלבום, תאריך ההוצאה והלייבל.

זה בסדר אם אתם לא מבינים כרגע כל שורה ושורה מהקוד, בתרגול ובשיעורי הבית כאמור תתרגלו את הנושא.

:::

כעת יש לנו מילון מקונן שבו כל מפתח הוא מזהה סידורי וכל ערך הוא מילון קטן בעצמו, עם ערכים כמו שם ותאריך הוצאה לכל אלבום. ניתן לעטוף מילון כזה בתוך דאטאפריים של פנדאז, והנה הטבלה שלנו, כבר לא רק בדף באינטרנט שאנחנו יכולים רק לבהות בו, אלא ממש על המחשב שלנו וניתן לשאול שאלות מעניינות על התקליטים של הביטלס ולענות עליהן באמצעותה.

=== 3. ביג דאטא, סמול דאטא ===

לפני שנמשיך כמה הערות על המונחים הפופולריים סמול דאטא וביג דאטא.

יש כאלה שיטענו שדאטא הוא קטן או גדול לפי הגודל שהוא צורך פיסית, על הדיסק. לדוגמא אנחנו מביאים כאן הגדרה לדאטא קטן - זה דאטא שנכנס בקובץ אקסל. והגדרה לדאטא גדול - זה דאטא שלא נכנס בזיכרון של מחשב בודד.

הגדרות אחרות חושבות על האופן בו אנחנו מעבדים את הדאטא. לדוגמא דאטא קטן הוא דאטא שאנשים יכולים להבין. או דאטא גדול זה דאטא ששיטות מסורתיות לעיבוד נתונים כבר לא יכולות לפעול עליו.

:::

אם חייבים הגדרה מדויקת, היא בטח תכלול את שני הפרמטרים האלה.

לדוגמא, דאטא שנכנס באקסל, עם מיליון שורות ו-16 אלף עמודות. נסו להזין מטריצה כזאת בזיכרון בפייתון, לכפול אותה, להפוך את התוצאה - לא בטוח שתצליחו. אז למרות שהנתונים נכנסים באקסל, הם לא גדולים מאוד?

לחילופין, לפי מקור מסוים פייסבוק מייצרת כמה פטאבייטים של דאטא כל יום, או מיליוני ג'יגה-בייט. אבל אם נציץ מעבר לכתף של מדענית נתונים בפייסבוק, ספק אם היא משתמשת בצורה יומיומית בנתונים שהגודל שלהם הוא מעל מה שהמחשב שלה יכול להכיל, רוב הזמן אנחנו פועלים על איזו תת קבוצה קטנה של נתונים. אז גם דאטא של פייסבוק יכול להיות "קטן".

:::

אנחנו רוצים להגיד שזה לא מאוד חשוב, ולא תידרשו בקורס הזה להיצמד לאיזו הגדרה טכנית. כולנו יכולים להסכים שהנתונים שהאינטרנט מייצר הם נתוני ענק. בתרשים הזה שמתעדכן כל שנה אפשר לראות כמה דוגמאות: שכל דקה גוגל שומרת 6 מיליון חיפושים. אינסטגרם מפרסמת 66 אלף תמונות חדשות. או שיוטיוב מעלים 500 שעות של וידאו. כל דקה.

=== 4. תחקור נתונים: תרשימים בסיסיים ===

אחד הדברים הראשונים שנרצה לעשות עם נתונים, קטנים או גדולים, הוא למצות מהם כמה תרשימים. בתרשים ויזואלי אחד יש פוטנציאל לזהות המון דברים על הנתונים שלנו, ואולי גם בעיות. בחלק זה נחזור על כמה תרשימים בסיסיים למשתנים רציפים או כמותיים. לאחר מכן נראה כמה תרשימים מודרניים ומרגשים.

:::

נשתמש בספריית seaborn שמתממשקת היטב עם פנדאז, ונצייר תרשים קופסה, או בוקספלוט.

כאן אני מצייר בוקספלוט של משתנה אקראי X, ואני רוצה שהקופסה תהיה עומדת, בניגוד לשוכבת, אז אני מפרט y = X.

(הדגמה על הלוח)
הבוקספלוט פופולרי כי הוא תרשים פשוט שמורכב מחמישה קווים בלבד:
הקו במרכז הקופסא הוא החציון של הנתונים, הערך שחצי מההתפלגות מעליו, וחצי מתחתיו.
הגבול התחתון והגבול העליון של הקופסה הם הרבעון התחתון או האחוזון ה-25, והרבעון העליון או האחוזון ה-75. תיכף נגדיר אחוזונים במדויק אבל נזכור שאחוזון 25 הוא הערך שמתחתיו נמצאים 25 אחוזים מהנתונים.

רוחב הקופסה הוא האחוזון הרבעון העליון פחות הרבעון התחתון. ערך זה נקרא ה-IQR או הinterquartile range. כדי לקבל את השפם העליון נוסיף לרבעון העליון או הגבול העליון של הקופסא את ה-IQR כפול 1.5, אבל לא נמתח עד שם את השפם אלא היכן שנמצא הערך הכי קרוב אליו מלמטה.

כדי לקבל את השפם התחתון נעשה אותו דבר כלפי מטה: נמתח את השפם בערך הכי קרוב מלמעלה, לרבעון תחתון פחות 1.5 כפול ה-IQR.

לבסוף נסמן את כל התצפיות שנפלו מעבר לגדר הזאת בין שני השפמים, אלה תצפיות יחסית חריגות.

:::

תרשים פופולרי לאחרונה הוא הסוורם פלוט, סוורם מהמילה באנגלית לנחיל, כמו נחיל של דבורים. היתרון בסוורמפלוט הוא שכל תצפית מיוצגת על-ידי נקודה, וכך אפשר לראות את צורת ההתפלגות במדויק יותר. סוורמפלוט מתאים אולי יותר לדאטא קטן יותר, שאם נסרטט עליו בוקספלוט התמונה תהיה אולי קצת מטעה.

:::

היסטוגרמה היא תרשים נפוץ להראות התפלגות, כאן אנחנו מציירים אותה עם הפקודה sns.distplot ואנחנו מפרטים kde = False, תיכף נדבר על זה.

ההיסטוגרמה מחלקת את הטווח הרלוונטי למשתנה למקטעים שווים שנקראים גם bins, וסופרת כמה ערכים נמצאים בכל בין. בצורה כזאת קל לראות אם ההתפלגות סימטרית או לא, אולי יש לה זנב ימינה לכיוון ערכים גדולים, או זנב שמאלה לכיוון ערכים קטנים.

:::

כדי לראות את ההתפלגות בצורה חלקה יותר, נבקש מהפונקציה distplot, hist = False. זה יצייר לנו תרשים צפיפות.

מהו תרשים צפיפות?

:::

תרשים צפיפות נוצר עם מה שקרוי קונבולוציה על הנתונים, או קרנל דנסיטי אסטימיישן.

נגדיר איזושהי פונקציית גרעין, קרנל, w(x). הדרישות שלנו מהפונקציה שתהיה סימטרית, כלומר w(x) = w(-x), ושהאינטגרל עליה יתן 1.

בפועל אנחנו מחפשים מעין חלון קטן (להראות דוגמאות). 

את החלון הזה נזיז לאורך טווח הערכים שהמשתנה איקס מקבל, ונפעיל אותו על המשתנה X, וזו תהיה הצפיפות. השטח תחת תרשים הצפיפות שמתקבל הוא: 1. למעשה קיבלנו מעין היסטוגרמה מוחלקת.

מה גודל החלון שאנחנו רוצים לבחור?
אם נבחר חלון רחב מידי, זה נקרא פרמרטר bandwidth, התוצאה עשויה להיות חלקה מאוד אבל עלולה לא לייצג את המבנה האמיתי של ההתפלגות.
אם נבחר bandwidth קטן מדי כלומר חלון צר מידי, התרשים צפיפות יהיה ספציפי מדי ולא מספיק חלק.

בואו נראה את זה.

:::

בדוגמא שלפניכם אני משתמש בפרמטר bw מהמילה bandwidth. אפשר לראות שכשהוא קטן מידי הצפיפות לא מספיק חלקה, הרבה קפיצות כנראה לא מאוד חשובות בנתונים.
אם הפרמטר גדול מידי נוצרת התפלגות פעמון מושלמת וסימטרית, אבל היא ממש לא מייצגת את הנתונים. במקרה הזה נכון כנראה פרמטר bw באמצע, נאמר 1.

:::

תרשים חשוב בין זוג משתנים רציפים הוא תרשים פיזור או הסקאטרפלוט. כאן אני מדמה איזשהו משתנה Y על סמך משתנה X, מוסיף לו קצת רעש ומשתמש בsns.scatterplot ליצור תרשים פיזור ביניהם. בתרשים פיזור כל זוג ערכים X ו-Y הם נקודה שערך ה-X שלה הוא X וערך ה-Y שלה הוא Y.

תרשים כזה מאפשר לראות קשר בין שני משתנים רציפים, ובפרט מה שיעניין אותנו מאוד - האם יש לו איזשהו דפוס, כמו עליה או ירידה.

:::

מה ניתן ללמוד מתרשימים פשוטים? לא מעט.

האם יש תצפיות חריגות, כמו בתרשים שלפנינו שמתאר התפלגות מספר תושבים ליחידת דיור, בערים שונות בארצות הברית. יש פה בבירור תצפית חריגה של כמה ערים שבהן המספר הזה קטן במיוחד, במקרה הזה מדובר למשל בניו יורק סיטי, שם גרים יותר רווקים ופחות משפחות.

כפי שאמרנו מעניין אותנו מאוד לדעת מה צורת ההתפלגות ואיזה זנב יש לה במידה שהיא לא סימטרית. כאן למשל רואים זנב שמאלי בהיסטוגרמה שמתארת גיל של נשים שלקו בהתקף לב - כי התופעה נדירה יותר בקרב צעירות.

לעומת זאת בנתונים שמערבים כסף, כמו כאן בהיסטוגרמה שמתארת התפלגות ההוצאות של נשים שטופלו במחלקות לב, נראה הרבה פעמים זנב ימני - חריגות של ערכים גבוהים. ברוב המקרים לא יוגש לפציינטית חשבון שלילי, חשבון, כסף, זה דבר שיכול רק לגדול, לכן בנתונים פיננסיים נראה הרבה פעמים זנב ימני.

=== 5. תחקור נתונים: נתוני תמצית ===

נדבר כעת על מספר אומדנים סטטיסטיים שחשובים לנו, את חלקם כבר ראינו בחזרה על הסתברויות בדידות, נתמקד עכשיו במשתנים רציפים.

:::

אומדנים של מיקום: היכן מרכז המסה של ההתפלגות?

יש לנו את ממוצע המדגם, שמסומן בד"כ כאיקס באר.

החציון, הוא הערך שמעליו חצי מההתפלגות ומתחתיו חצי, זה גם האחוזון ה-50.

והשכיח - הערך הכי נפוץ במדגם.

:::

למה שנרצה ערך אחד למיקום ולא אחר. לדוגמא בהתפלגות עם זנב ימני כמו כאן, נחשב את הממוצע, החציון והשכיח. הממוצע הוא ודאי הסטטיסטי המוכר מכולם אבל שימו לב כמה הוא מושפע מערכים קיצוניים בהתפלגות. הוא לא בהכרח מעיד מה שהיינו רוצים שהוא יעיד, סביב איזה ערך ממורכזת ההתפלגות.

חציון לעומת זאת, אינו מושפע מערכים קיצוניים, גם אם נוסיף להתפלגות ערך מקסימלי גדול פי אלף מהנוכחי, החציון לא יזוז.

לצרכים אחרים השכיח אולי הוא התשובה הטובה ביותר למיקום, אבל השכיח גם יכול להטעות, קל לחשוב על התפלגויות בהן השכיח הוא בעייתי מאוד כמדד למיקום.

:::

כשאנו מדברים על פיזור אפשר לשאול על ערכים במיקומים ספציפיים, כמו אחוזונים.

האחוזון ה-q הוא הערך שמתחתיו q מההתפלגות האמפירית של המדגם, ומעליו אחת מינוס q.

לדוגמא האחוזון ה-75 או Q(X, 0.75), הוא הערך וי שמתחתיו 75 אחוזים מהמדגם ומעליו 25 אחוזים.

מדד אחר יכול להיות הטווח של ההתפלגות, המקסימום פחות המינימום שלה.

ומדד אחר כפי שראינו הוא ה-IQR או ה-interquartile range, שהוא הטווח שבו נמצאים חמישים האחוזים המרכזיים של ההתפלגות: אחוזון 75 פחות אחוזון 25.

:::

לבסוף המדדים הנפוצים ביותר למדידת פיזור הם שונות המדגם, והשורש שלה סטיית התקן.

לכל אחד מאלה יש פונקציה פשוטה מספריית numpy שכדאי להכיר.

:::

בשונות אנחנו שואלים מהו ממוצע הסטיות הריבועיות של X מהממוצע שלו. מסתבר שאם ניקח את ממוצע הסטיות בחזקת 3 של X מהממוצע שלו, נקבל כמות שיכולה למדוד עד כמה ההתפלגות שלנו רחוקה מסימטריה. קוראים לזה skewness. אם ההתפלגות סימטרית למדי נצפה לראות סקיונס של אפס בקירוב, אם יש לה זנב ימני, הסטיות החיוביות מהממוצע גדולות יותר, נצפה לראות סקיונס חיובי. כמו במקרה שלנו שבו לX יש זנב ימני.

ולהיפך, זנב שמאלי יתבטא בסקיונס שלילי.

=== 6. ויזואליזציה מתקדמת ===

משסיימנו לדבר על מדדים ותרשימים סטנדרטיים לנתונים כמותיים, אנחנו רוצים לגרות את הדמיון שלכם באמצעות כמה תרשימים מתקדמים למדי. התחום של ויזואליציה או סטוריטלינג תופס תאוצה בשנים האחרונות עד כדי כך שיש מדעני נתונים וחוקרים שהקריירה שלהם מוקדשת לדבר. דרכים שונות ומקוריות להציג נתונים צצות כל יום, בואו נתרשם מכמה שאהבנו.

:::

הדוגמא הקלאסית היא דווקא ישנה, מהמאה ה19, של מהנדס וגיאוגרף צרפתי בשם שארל ז'וזה מינארד. כאן הוא תאר את הצבא של נפוליאון והמסע שלו מפולין אל מוסקבה במטרה לכבוש את רוסיה. עובי הרצועה מתאר את גודל הצבא שכפי שאנחנו רואים התמעט בצורה אכזרית במסע חזרה. כיוון הרצועה והאורך שלה מתארים את הכיוון והמרחק בהם הצבא נע.

:::

מפות חום. גם תרשים זה מפורסם מאוד, הוא מתאר את שיעור מקרי החצבת במדינות שונות בארצות הברית החל מ-1928 ועד המאה ה-21. המיוחד בתרשים הוא כמובן ההיפסקות הכמעט מוחלטת של חצבת לאורך כל ארה"ב החל משנת 1963, השנה שבה פותח החיסון לחצבת.

:::

הנה דוגמא לויזואליזציה מ-2017 שמדגימה מספר דברים יפים. את הויזואליזציה הזאת הכין מדען נתונים מספוטיפיי, חברת הסטרימינג של מוסיקה. והוא מראה לאורך ליקוי חמה מאוד בולט שהיה על אדמת ארצות הברית, את מספר ההשמעות של השיר total eclipse of the heart, בספוטיפיי. ניתן לראות איך הפיק עוקב אחרי ליקוי החמה בצורה אדוקה.

דבר נוסף שהויזואליזציה הזאת מדגימה הוא שבעידן המחשב ויזואליזציה לא חייבת להיות סטטית. גם בפייתון, גם בשפות נוספות, ניתן ליצור כמה תרשימים ולחבר אותם לסרטון קצר שממחיש את התופעה טוב יותר.

:::

הנה עוד תרשים על גבול המגוחך: להביע נתונים באמצעות אימוג'י! כאן מדובר בנתונים על האוכלוסיה במדינות שונות בארצות הברית, כשכל מדינה מיוצגת על ידי פרצוף אחד

כמה פרמטרים מוצגים כאן על כל פרצוף ופרצוף. לדוגמא גודל הסנטר מבטא את אחוז האנשים שסובלים מהשמנה במדינה. גוון הפרצוף מבטא את אחוז התושבים שאין להם ביטוח (ככל שהוא כהה יותר כך גדול האחוז). והאוריינטציה של הפה, מעצוב ועד צוחק מבטאת את אחוז התושבים מתחת לקו העוני. אם תלחצו על הלינק המצורף, תראו עוד דבר מיוחד בתרשים הזה, וזה שהוא אינטראקטיבי. כשנרחף על פני כל פרצוף נקבל את כל הנתונים שאנחנו צריכים על המדינה שהוא מייצג.

:::

תרשים שצבר פופולריות לאחרונה הוא תרשים הרכסים, או הג'וי פלוט כפי שקוראים לו לפעמים, כי הוא מזכיר עטיפת אלבום מצוין של להקת רוק בשם ג'וי דיוויז'ן.

היופי בתרשים הזה זה שהוא מורכב מהרבה תת-תרשימים שאנחנו מכירים - תרשימי צפיפות, שמסודרים אחד מעל השני כאן לפי החציון של ההתפלגות. במקרה שלפנינו השתמשו בתרשים רכסים כדי להשוות את המנעד הקולי של זמרות פופ מפורסמות, מבריטני ספירס ועד וויטני יוסטון, שהיה לה מנעד גם רחב מאוד וגם חציון התווים שהיא שרה היה כנראה הגבוה ביותר מבין אלה.

:::

כאן אנחנו רואים ויזואליזציה שלקרוא לה תרשים יהיה ממש מגוחך. מדובר בסרטון שלם שמתאר מה אנשים עושים עושים במהלך כל שעה ביום, לפי סקר שנעשה בארצות הברית. ניתן לראות שבחצות רוב האנשים מתארים שהם ישנים. אם נעביר קצת קדימה את הזמן נראה שרוב האנשים מתארים כיצד הם מתעוררים והולכים לעבודה, וחוזר חלילה.

:::

ויזואליזציות חזקות יכולות גם להעביר מסר, שמאוד קשה להעביר בצורות אחרות. מדעניות הנתונים מאחורי הויזואליזציה שלפנינו דגמו לא פחות מ-80 זוגות של ג'ינסים, ושרטטו את  מימדי הכיס. ניתן לתהות מדוע כיסים במכנסי ג'ינס שמיועדים לנשים הם קטנים כל כך עד כדי שהם לא פרקטיים בכלל. התרשים הזה הוא הוכחה ניצחת לתופעה.

:::

לבסוף נראה ויזואליזציה של רופא ואפידמיולוג שבדי בשם האנס רוזלינג שהפכה מפורסמת מאוד, עד כדי כך שיש לה אתר משלה.

(הסבר על gapminder)

=== 7. הסכנות בנתונים מלוכלכים ===

בחלק האחרון של יחידה זו נזהיר קצת מפני הסכנות החבויות בדאטא גדול, בודאי בדאטא שנאסף מהאינטרנט. ניקיון של דאטא מהווה חלק גדול משגרת יומו של מדען נתונים, והוא נושא מחקר גדול. אנחנו דנים בו כאן ממש על קצה המזלג.

:::

מה יכול להיות מלוכלך בנתונים שצריך לנקות אותם? נראה שאפשר לדבר גם על הנתונים עצמם, וגם על המבנה שלהם.

:::

כשאנחנו מדברים על משתנים כמותיים, דאטא "לא נקי" יכול להיות דאטא עם תצפיות כל כך חריגות שנקרא להם outliers. אלה לא חייבות להיות תצפיות "לא חוקיות", או טעויות הקלדה, למרות שגם מכאלה צריך להתגונן. כאן למשל יש היסטוגרמה של כמה עשרות אלפי רכישות בדולרים באתר איביי במשך כמה שבועות ב-2013. הסיבה שאנחנו רואים כאן רק מקל סביב האפס היא כי אחת הרכישות האלה היתה של מכונית יוקרה בכ160 אלף דולר. המכונית הזאת היא כל כך חריגה ביחס לסכומי הרכישות האחרים, שהיא מעוותת את ההתפלגות לחלוטין ולא מאפשרת באמת לראות את צורתה, איפה נמצאת המסה של הרכישות.

נתונים אחרים רועשים מאוד מהאינטרנט בפרט יכולים להיות נתוני טקסט. בדוגמא שלפנינו מופיעות מילים אמיתיות מתוך קובץ טקסטים שהם בלוגים מאתר blogger.com משנת 2004. אם ברצונכם לקחת את הטקסט הזה ולאמן אותו לצורך מודל שפה ולהתחשב בכל מילה ומילה שאיזה בלוגר כתב, אתם עלולים להיות בבעיה.

:::

נושא אחר שיכול לשמש כמוקד של קורס שלם הוא נושא הנתונים החסרים. כל מיני מנגנונים יכולים לעמוד מאחורי נתונים חסרים, ובהתאם למנגנון כך ראוי להתאים שיטת טיפול לנתונים. בקורס זה לא נעסוק בנושא בהרחבה, אבל כל מדען נתונים שעוסק עם דאטא אמיתי ייתקל בסופו של דבר בבעיה הזאת, שכן מודלים רבים מאלה שנלמד לא יודעים מה לעשות עם תצפית שבמשתנה מסוים הנתון שלה חסר.

כאן אנחנו רואים דוגמא מפורסמת מהבחירות בישראל ב-2015, כאשר המדגמים טעו לגמרי לגבי הרכב הקואליציה המסתמן, והסוקרים טענו מאוחר יותר שכנראה שאנשים שמתכוונים להצביע בדרך מסוימת לא ענו או פשוט שיקרו.

:::

לסיום נזכיר שלא רק הנתונים יכולים להיות רועשים או מלוכלכים. הרבה פעמים גם אם הנתונים מגיעים בלחיצת כפתור, הם מגיעים למשל בקובץ אקסל ששום תוכנת מחשב לא יכולה לקרוא כטבלה פשוטה שאפשר להתחיל לעבוד איתה.

במקרה שלנו אלה נתונים אמיתיים של הלשכה המרכזית לסטטיסטיקה של אוסטרליה, והדרך המשונה שלהם לחלוק מידע עם הציבור. יש כאן לוגו, תאים ממוזגים, פסיקים בתוך מספרים, שורות סיכום ועוד הרבה אתגרים שלוקח זמן לטפל בהם. אתם מוזמנים להוריד קובץ נתונים מהלשכה המרכזית לסטטיסטיקה בישראל ולראות שהמצב שם לא מאוד שונה.

:::

אקסל היא תוכנה נהדרת, אבל יש כל כך הרבה מקרים ששימוש לא אחראי בה הביא לתוצאות הרסניות ממש. באחד המקרים האחרונים מתקופת הקורונה בבריטניה, הפקידים בקופות החולים שהיו אחראים על איחוד התוצאות של בדיקות קורונה לא היו מודעים למגבלת השורות שיש באקסל, הם אפילו השתמשו בגירסה ישנה של אקסל עם מקסימום 64 אלף שורות. נוספו עוד ועוד שורות לקובץ האחוד, אבל אקסל לא קרא את כולם, הוא פשוט מחק שורות. ולקח זמן עד שהבינו שאלפי בדיקות פשוט נמחקו ככה מהדיסק.

:::

אז מה אפשר לעשות לגבי נתונים שאנחנו חושדים שיש בהם תצפיות חריגות? קודם כל לצייר אותם. כאן אנחנו רואים דוגמא לתרשים pairplot, תרשים זוגות, שלוקח סט של נתונים ומצייר כל משתנה מול כל משתנה אחר. על האלכסון יופיעו התרשימים של כל משתנה בנפרד. אולי התרשמות מהירה כזאת תאפשר לכם לזהות אנומליות בנתונים כבר בהתחלה.

:::

אסטרטגיה נוספת שכדאי להיות מודעים לה כבר מעכשיו, היא שימוש בטרנספורמציות על הנתונים שלנו. כאן אנחנו רואים את אותם נתוני רכישות מאיביי, בלי ועם טרנספורמציית לוג. טרנספורמציות יכולות פעמים רבות לייצב שונות של משתנים, ואף לשפר ביצועים של מודלים שמשתמשים באותם נתונים. נדבר עוד על טרנספורמציות על נתונים בהמשך.

:::

כדי לתאר מיקום של התפלגויות על נתונים גדולים, מומלץ להשתמש בחציון ולא רק בממוצע. מדדים אלה קלים לחישוב וההשוואה ביניהם לפעמים פוקחת עיניים. בסימולציה כאן אנחנו רואים כיצד הממוצע מושפע בקלות ככל שאנחנו מגדילים את המקסימום של איזה משתנה X.  הממוצע נע ימינה וימינה לעבר הערך הקיצון, עד כדי כך שהוא יוצא החוצה ממרכז ההתפלגות וכבר לא משקף את מה שאנחנו היינו רוצים שישקף.

החציון לעומת זאת - לא מושפע.

:::

לבסוף מומלץ גם לחשוב על הדרך שבה אתם מזינים נתונים. תנגישו לאנשים נתונים בצורה שאתם הייתם רוצים שינגישו אותם לכם.

אחת הגישות הפופולריות בתחום היא הtidy data. נקפיד ככל האפשר שכל משתנה יופיע  בעמודה משלו. כל תצפית תהיה שורה. וכל טבלה עוסקת בנושא אחד ויחיד.

בדוגמא כאן אנחנו רואים כיצד אפילו טבלה פשוטה אפשר לשמור בצורה שמסבכת את העניינים. נסו לחשוב למשל איך הייתם מחלצים את השמות של כל האנשים ששקלו לפני גיל 25 מתחת ל-70 קילוגרם... בטבלה השניה שעומדת בקריטריונים של גישת הtidy data, זה הרבה יותר קל.

זהו להפעם! ביחידה הבאה ניקח את כל מה שלמדנו עד כה וננסה להפעיל אותו על סט נתונים אמיתי, מתוך תחרות מידול חשובה, של נטפליקס.
:::
